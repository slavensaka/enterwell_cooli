generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Recipe {
  id                String            @id @default(uuid())
  slug              String            @unique
  name              String
  createdAt         DateTime          @default(now())
  updatedAt         DateTime          @updatedAt
  authorId          String?
  authorUsername    String
  cookTime          Int?
  cookingMethod     String?
  difficulty        DifficultyLevel?
  intro             String?
  mainImageUrl      String?
  mealType          String?
  occasion          String?
  prepTime          Int?
  region            String?
  season            String?
  servingSuggestion String?
  servings          Int?
  tips              String?
  ingredients       Ingredient[]
  preparationSteps  PreparationStep[]

  @@index([slug])
  @@index([authorUsername])
  @@index([createdAt])
}

model Ingredient {
  id       String  @id @default(uuid())
  recipeId String
  quantity String
  unit     String?
  name     String
  order    Int
  recipe   Recipe  @relation(fields: [recipeId], references: [id], onDelete: Cascade)

  @@index([recipeId])
}

model PreparationStep {
  id          String @id @default(uuid())
  recipeId    String
  stepNumber  Int
  description String
  recipe      Recipe @relation(fields: [recipeId], references: [id], onDelete: Cascade)

  @@index([recipeId])
  @@index([recipeId, stepNumber])
}

enum DifficultyLevel {
  EASY
  MEDIUM
  HARD
}
